{% extends "base.html" %}

{% block title %}Workout Log{% endblock %}

{% block extra_head %}
<style>
    /* --- VISIBILITY & THEME FIXES --- */
    /* Force warm beige text on list items to override Bootstrap defaults */
    .list-group-item {
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        color: var(--text-main) !important;
        transition: transform 0.2s ease, border-color 0.2s ease;
    }
    .list-group-item:hover {
        transform: translateX(5px);
        border-color: var(--accent-golden);
    }
    
    /* Ensure muted text isn't too dark */
    .text-muted {
        color: #B8A898 !important; 
    }

    /* --- QUOTE SECTION STYLING --- */
    .quote-container {
        margin-top: 4rem;
        padding: 3rem;
        background: linear-gradient(135deg, rgba(28,28,28,1) 0%, rgba(40,40,40,1) 100%);
        border: 1px solid var(--accent-golden);
        border-radius: 16px;
        position: relative;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .quote-icon {
        font-size: 4rem;
        color: var(--accent-golden);
        opacity: 0.3;
        font-family: 'Times New Roman', serif;
        line-height: 1;
        margin-bottom: -1rem;
    }

    .quote-text {
        font-family: 'Lora', serif; /* Elegant Serif for the quote */
        font-size: 1.5rem;
        font-style: italic;
        color: #F5E8D8;
        margin-bottom: 1.5rem;
        line-height: 1.6;
        text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    .quote-author {
        font-family: 'Bebas Neue', sans-serif; /* Bold Condensed for author */
        font-size: 1.2rem;
        letter-spacing: 2px;
        color: var(--accent-coral);
        text-transform: uppercase;
    }
    
    /* Fade In Animation */
    .fade-in {
        animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-5">
    <h1 class="display-5" style="color: var(--accent-coral); font-family: 'Bebas Neue'; letter-spacing: 2px;">
        üí™ Workout Log
    </h1>
    <a href="{% url 'core:workout_create' %}" class="btn px-4 py-2" style="background-color: var(--accent-golden); color: #1C1C1C; font-weight: bold; border-radius: 50px;">
        + Log Session
    </a>
</div>

{% if sessions %}
    <div class="list-group gap-3">
        {% for session in sessions %}
        <div class="list-group-item p-4 d-flex flex-column flex-md-row justify-content-between align-items-center shadow-sm rounded-4">
            
            <div class="d-flex align-items-center mb-3 mb-md-0 col-md-4">
                <div class="text-center me-4 px-3 py-2 rounded-3" style="background: rgba(218, 165, 32, 0.1); border: 1px solid var(--accent-golden);">
                    <span class="d-block fw-bold" style="font-size: 0.8rem; color: var(--accent-golden); letter-spacing: 1px;">{{ session.date|date:"M"|upper }}</span>
                    <span class="d-block fw-bold display-6" style="color: #F5E8D8; line-height: 1;">{{ session.date|date:"d" }}</span>
                </div>
                <div>
                    <h4 class="mb-1 fw-bold" style="color: #F5E8D8;">{{ session.workout_type.name|default:"General Workout" }}</h4>
                    <div class="small text-muted">
                        <i class="bi bi-clock me-1"></i> {{ session.start_time|time:"H:i" }} 
                        {% if session.duration_minutes %} ‚Ä¢ {{ session.duration_minutes }} min {% endif %}
                    </div>
                </div>
            </div>

            <div class="mb-3 mb-md-0 col-md-4 text-md-center">
                <div class="d-inline-flex gap-5">
                    <div class="text-center">
                        <span class="d-block small text-muted text-uppercase" style="letter-spacing: 1px;">Volume</span>
                        <span class="fw-bold" style="color: var(--accent-coral); font-size: 1.3rem; font-family: 'Montserrat', sans-serif;">{{ session.total_volume }} kg</span>
                    </div>
                    <div class="text-center">
                        <span class="d-block small text-muted text-uppercase" style="letter-spacing: 1px;">Exercises</span>
                        <span class="fw-bold" style="color: #F5E8D8; font-size: 1.3rem; font-family: 'Montserrat', sans-serif;">{{ session.exercises.count }}</span>
                    </div>
                </div>
            </div>

            <div class="col-md-4 text-end">
                <a href="{% url 'core:workout_detail' session.pk %}" class="btn btn-sm btn-outline-light rounded-pill px-4 me-2">View</a>
                <a href="{% url 'core:workout_update' session.pk %}" class="btn btn-sm btn-outline-secondary rounded-pill px-4" style="border-color: #555;">Edit</a>
            </div>
        </div>
        {% endfor %}
    </div>

{% else %}
    <div class="text-center py-5">
        <div class="mb-4">
            <i class="bi bi-bar-chart-line" style="font-size: 3rem; color: #333;"></i>
        </div>
        <p class="lead text-muted">No workouts recorded yet.</p>
        <a href="{% url 'core:workout_create' %}" class="btn btn-outline-light mt-3">Start your first workout</a>
    </div>
{% endif %}

<div class="quote-container fade-in">
    <div class="quote-icon">‚ùù</div>
    <p id="quote-display" class="quote-text">Loading iron wisdom...</p>
    <p id="author-display" class="quote-author"></p>
</div>
{% endblock %}
<script>
document.addEventListener('DOMContentLoaded', function () {
  const quotes = [
    { text: "Everybody wants to be a bodybuilder, but nobody wants to lift no heavy-ass weights.", author: "Ronnie Coleman" },
    { text: "The worst thing I can be is the same as everybody else.", author: "Arnold Schwarzenegger" },
    { text: "The squat is the perfect analogy for life. It's about standing back up after something heavy takes you down.", author: "Tom Platz" },
    { text: "Light weight, baby!", author: "Ronnie Coleman" },
    { text: "Strength does not come from winning. Your struggles develop your strengths.", author: "Arnold Schwarzenegger" },
    { text: "When you start squatting, you'll feel like you're dying... that's when you start counting.", author: "Tom Platz" },
    { text: "I don't care how many reps you do, as long as you lift heavy weights.", author: "Kevin Levrone" },
    { text: "You have to be willing to fail to succeed.", author: "Tom Platz" },
    { text: "Vision creates faith and faith creates willpower.", author: "Arnold Schwarzenegger" },
    { text: "Man‚Äôs proper stature is not one of mediocrity, but one of achievement and strength.", author: "Mike Mentzer" },
    { text: "Pain is temporary. Quitting lasts forever.", author: "Lance Armstrong" },
    { text: "You can‚Äôt cheat the grind. It knows how much you‚Äôve invested.", author: "Eric Thomas" },
    { text: "Great things come from hard work and perseverance. No excuses.", author: "Kobe Bryant" },
    { text: "Believe you can, and you‚Äôre halfway there.", author: "Theodore Roosevelt" },
    { text: "Champions keep going when they have nothing left in the tank.", author: "Billie Jean King" },
    { text: "Strength is not given. It is earned through pain and repetition.", author: "Unknown" }
  ];

  // fast path: if array empty, bail
  if (!quotes || quotes.length === 0) return;

  // pick random index and update DOM ‚Äî constant time
  const idx = Math.floor(Math.random() * quotes.length);
  const selected = quotes[idx];

  // place text into DOM if elements exist
  const quoteDisplay = document.getElementById('quote-display');
  const authorDisplay = document.getElementById('author-display');

  if (quoteDisplay) quoteDisplay.textContent = '"' + selected.text + '"';
  if (authorDisplay) authorDisplay.textContent = selected.author ? '‚Äî ' + selected.author : '';
});
</script>
